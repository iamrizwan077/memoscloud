{"ast":null,"code":"import _defineProperty from \"/home/rizwan/Desktop/memoscloud/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/rizwan/Desktop/memoscloud/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/rizwan/Desktop/memoscloud/frontend/src/AuthContext.js\";\n\nimport axios from 'axios';\nimport React, { createContext, useState, useEffect } from 'react';\nimport Navbar from './Navbar';\nimport jwt_decode from \"jwt-decode\";\nvar AuthContext = createContext();\nexport default AuthContext;\nexport var AuthProvider = function AuthProvider(_ref) {\n  var _contextData;\n\n  var children = _ref.children;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      authToken = _useState2[0],\n      setAuthToken = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      auth = _useState6[0],\n      setAuth = _useState6[1];\n\n  var _useState7 = useState({}),\n      _useState8 = _slicedToArray(_useState7, 2),\n      tokenData = _useState8[0],\n      setTokenData = _useState8[1];\n\n  var loginUser = function loginUser(e) {\n    e.preventDefault();\n    console.log(\"FOrm\");\n    var response = axios({\n      method: \"post\",\n      url: \"http://127.0.0.1:8000/api/token/obtain/\",\n      headers: {\n        //    'Authorization': \"JWT \"+ localStorage.getItem('access_token'),\n        'Content-Type': 'application/json',\n        'accept': 'application/json'\n      },\n      data: JSON.stringify({\n        'email': e.target.email.value,\n        'password': e.target.password.value\n      })\n    }).then(function (res) {\n      console.log(res.data);\n      setTokenData(res.data);\n      console.log(\"Token\", tokenData);\n    }).catch(function (error) {\n      if (error.response) {\n        // Request made and server responded\n        console.log(error.response.data);\n        console.log(error.response.status);\n        console.log(error.response.headers);\n      } else if (error.request) {\n        // The request was made but no response was received\n        console.log(error.request);\n      } else {\n        // Something happened in setting up the request that triggered an Error\n        console.log(\"Error\", error.message);\n      }\n    }); //    setData(res.data)\n    //    console.log(data)\n    //let data = await JSON.stringify(response.data)\n    //let data = await response.json()\n\n    console.log(\"data:\", tokenData);\n    console.log(response);\n    console.log(response.status);\n\n    if (response.status == 200) {\n      console.log(\"RAched1\");\n      setAuthToken(tokenData);\n      console.log(\"RAched2\");\n      console.log(tokenData);\n      console.log(tokenData[0]);\n      setUser(jwt_decode(tokenData.access));\n      console.log(\"RAched3\");\n      setAuth(true);\n      console.log(\"RAched4\");\n    } else {\n      console.log(\"Something went wrong!\");\n    }\n  };\n\n  var contextData = (_contextData = {\n    user: user,\n    auth: auth\n  }, _defineProperty(_contextData, \"auth\", auth), _defineProperty(_contextData, \"loginUser\", loginUser), _contextData);\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: contextData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, children);\n};","map":{"version":3,"names":["axios","React","createContext","useState","useEffect","Navbar","jwt_decode","AuthContext","AuthProvider","children","authToken","setAuthToken","user","setUser","auth","setAuth","tokenData","setTokenData","loginUser","e","preventDefault","console","log","response","method","url","headers","data","JSON","stringify","target","email","value","password","then","res","catch","error","status","request","message","access","contextData"],"sources":["/home/rizwan/Desktop/memoscloud/frontend/src/AuthContext.js"],"sourcesContent":["import axios from 'axios'\nimport React, {createContext, useState, useEffect} from 'react'\nimport Navbar from './Navbar'\nimport jwt_decode from \"jwt-decode\";\n\n\nconst AuthContext = createContext()\n\nexport default AuthContext\n\n\n\nexport const AuthProvider = ({children}) => {\n\n    let [authToken, setAuthToken] = useState(null)\n    let [user, setUser] = useState(null)\n    let [auth, setAuth] = useState(false)\n    let [tokenData, setTokenData] = useState({})\n\n    \n\n    const loginUser = (e) => {\n        e.preventDefault()\n        console.log(\"FOrm\")\n        let response =  axios({\n            method:\"post\",\n            url:\"http://127.0.0.1:8000/api/token/obtain/\",\n            headers: {\n            //    'Authorization': \"JWT \"+ localStorage.getItem('access_token'),\n                'Content-Type': 'application/json',\n                'accept': 'application/json'\n            },\n            data: JSON.stringify(({'email': e.target.email.value, 'password': e.target.password.value}))\n        }).then((res) => {\n            console.log(res.data)\n            setTokenData(res.data)\n            console.log(\"Token\",tokenData)\n\n        })\n            .catch(function (error) {\n                if (error.response) {\n                  // Request made and server responded\n                  console.log(error.response.data);\n                  console.log(error.response.status);\n                  console.log(error.response.headers);\n                } else if (error.request) {\n                  // The request was made but no response was received\n                  console.log(error.request);\n                } else {\n                  // Something happened in setting up the request that triggered an Error\n                  console.log(\"Error\", error.message);\n                }\n              })\n\n\n        //    setData(res.data)\n        //    console.log(data)\n\n\n        //let data = await JSON.stringify(response.data)\n        //let data = await response.json()\n        \n        console.log(\"data:\" , tokenData)\n        console.log(response)\n        console.log(response.status)\n        if(response.status == 200){\n            console.log(\"RAched1\")\n            setAuthToken(tokenData)\n\n            console.log(\"RAched2\")\n            console.log(tokenData)\n            console.log(tokenData[0])\n            setUser(jwt_decode(tokenData.access))\n\n            console.log(\"RAched3\")\n            setAuth(true)\n            console.log(\"RAched4\")\n\n            \n        }\n        else{\n            console.log(\"Something went wrong!\")\n        }\n    }\n\n    let contextData = {\n        user:user,\n        auth,auth,\n        loginUser:loginUser\n    }\n\n\n\n\n\n    return(\n        <AuthContext.Provider value={contextData}>\n            {children}\n        </AuthContext.Provider>\n\n        \n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}